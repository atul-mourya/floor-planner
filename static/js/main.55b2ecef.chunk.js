(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(34)},30:function(e,t,n){},32:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),i=n(10),s=n(18),r=n.n(s),c=(n(30),n(2)),l=n(3),p=n(5),d=n(4),h=n(6),u=n(9),m=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("button",{id:this.props.id,shape:this.props.shape,onClick:function(){return e.props.onClick("ADD_LAYOUT",{shape:e.props.shape})}},this.props.children)}}]),t}(o.Component),b=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.props.showLayoutButtons?a.a.createElement("div",{id:"floor-planner"},a.a.createElement(m,{id:"box-layout",shape:"Box",onClick:this.props.onClick},"B"),a.a.createElement(m,{id:"t-layout",shape:"T",onClick:this.props.onClick},"T"),a.a.createElement(m,{id:"l-layout",shape:"L",onClick:this.props.onClick},"L"),a.a.createElement(m,{id:"u-layout",shape:"U",onClick:this.props.onClick},"U"),a.a.createElement(m,{id:"c-layout",shape:"C",onClick:this.props.onClick},"C")):a.a.createElement("div",null)}}]),t}(o.Component),w=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t="add"===this.props.id?"ADD_POINT":"REMOVE_POINT";return a.a.createElement("button",{id:this.props.id,onClick:function(){return e.props.onClick(t)}},this.props.children)}}]),t}(o.Component),v=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.props.showPointButtons?a.a.createElement("div",{className:"points"},a.a.createElement(w,{id:"add",onClick:this.props.onClick},"+"),a.a.createElement(w,{id:"remove",onClick:this.props.onClick},"-")):a.a.createElement("div",null)}}]),t}(o.Component),y=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.props.showClearButton?a.a.createElement("button",{id:this.props.id,onClick:function(){return e.props.onClick("CLEAR_LAYOUT")}},this.props.children):a.a.createElement("div",null)}}]),t}(o.Component),f=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.props.showCreateFloorButton?a.a.createElement("button",{id:this.props.id,onClick:function(){return e.props.onClick("CREATE_FLOOR")}},this.props.children):a.a.createElement("div",null)}}]),t}(o.Component),g=(n(32),n(8)),E=function(e){return console.log("Update UI requested !!"),{type:"UPDATE_EDITOR_UI",payload:e}},P=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(p.a)(this,Object(d.a)(t).call(this))).handleClick=e.handleClick.bind(Object(u.a)(Object(u.a)(e))),e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleClick",value:function(e,t){switch(e){case"ADD_LAYOUT":this.props.updateEditorUI({showClearButton:!0,showCreateFloorButton:!0,showPointButtons:"C"===t.shape,showLayoutButtons:!1}),q.createFloor({shape:t.shape});break;case"CLEAR_LAYOUT":q.clearFloor(),this.props.updateEditorUI({showClearButton:!0,showCreateFloorButton:!1,showPointButtons:!1,showLayoutButtons:!0});break;case"CREATE_FLOOR":q.extrude(),q.clearFloor(),this.props.updateEditorUI({showClearButton:!1,showCreateFloorButton:!1,showPointButtons:!1,showLayoutButtons:!1});break;case"ADD_POINT":q.addPoint();break;case"REMOVE_POINT":q.removePoint();break;default:console.log("Unknown Event Triggered")}}},{key:"createEditorUI",value:function(){return a.a.createElement(o.Fragment,{key:this.props.editorUI.id},a.a.createElement(b,{showLayoutButtons:this.props.editorUI.showLayoutButtons,onClick:this.handleClick}),a.a.createElement(v,{showPointButtons:this.props.editorUI.showPointButtons,onClick:this.handleClick}),a.a.createElement(f,{showCreateFloorButton:this.props.editorUI.showCreateFloorButton,id:"create-floor",onClick:this.handleClick},"Create Floor"),a.a.createElement(y,{showClearButton:this.props.editorUI.showClearButton,id:"clear",onClick:this.handleClick},"X"))}},{key:"render",value:function(){return a.a.createElement(o.Fragment,null,a.a.createElement("div",{id:"editor"}),this.createEditorUI())}}]),t}(o.Component);var M=Object(i.b)(function(e){return{editorUI:e.editorUI}},function(e){return Object(g.a)({updateEditorUI:E},e)})(P);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=function(e,t,n){var o,a=this,i=!1,s=0,r=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemsStart=function(e){r+=e,i=!0},this.itemStart=function(e){r++,!1===i&&void 0!==a.onStart&&a.onStart(e,s,r),i=!0},this.itemEnd=function(e){s++,void 0!==a.onProgress&&a.onProgress(e,s,r),s===r&&(i=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(e){void 0!==a.onError&&a.onError(e)},this.resolveURL=function(e){return o?o(e):e},this.setURLModifier=function(e){return o=e,this}},j=n(0),x=n(19),O=function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new j.R,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:j.v.LEFT,MIDDLE:j.v.MIDDLE,RIGHT:j.v.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(o),n.update(),r=s.NONE},this.update=function(){var t=new j.R,a=(new j.H).setFromUnitVectors(e.up,new j.R(0,1,0)),i=a.clone().inverse(),m=new j.R,b=new j.H;return function(){var e=n.object.position;return t.copy(e).sub(n.target),t.applyQuaternion(a),l.setFromVector3(t),n.autoRotate&&r===s.NONE&&L(2*Math.PI/60/60*n.autoRotateSpeed),l.theta+=p.theta,l.phi+=p.phi,l.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=d,l.radius=Math.max(n.minDistance,Math.min(n.maxDistance,l.radius)),n.target.add(h),t.setFromSpherical(l),t.applyQuaternion(i),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(p.theta*=1-n.dampingFactor,p.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(p.set(0,0,0),h.set(0,0,0)),d=1,!!(u||m.distanceToSquared(n.object.position)>c||8*(1-b.dot(n.object.quaternion))>c)&&(n.dispatchEvent(o),m.copy(n.object.position),b.copy(n.object.quaternion),u=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",q,!1),n.domElement.removeEventListener("mousedown",N,!1),n.domElement.removeEventListener("wheel",Q,!1),n.domElement.removeEventListener("touchstart",_,!1),n.domElement.removeEventListener("touchend",G,!1),n.domElement.removeEventListener("touchmove",W,!1),document.removeEventListener("mousemove",z,!1),document.removeEventListener("mouseup",U,!1),window.removeEventListener("keydown",B,!1)};var n=this,o={type:"change"},a={type:"start"},i={type:"end"},s={NONE:0,ROTATE_UP:1,ROTATE_LEFT:2,ROTATE:3,DOLLY:4,DOLLY_ROTATE:7,PAN:8,DOLLY_PAN:12},r=s.NONE,c=1e-6,l=new j.N,p=new j.N,d=1,h=new j.R,u=!1,m=new j.Q,b=new j.Q,w=new j.Q,v=new j.Q,y=new j.Q,f=new j.Q,g=new j.Q,E=new j.Q,P=new j.Q,M=new j.Q,R=new j.Q,x=new j.Q,O=new j.Q,C=new j.Q;function T(){return Math.pow(.95,n.zoomSpeed)}function L(e){p.theta-=e}function k(e){p.phi-=e}var S=function(){var e=new j.R;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}}(),A=function(){var e=new j.R;return function(t,o){!0===n.screenSpacePanning?e.setFromMatrixColumn(o,1):(e.setFromMatrixColumn(o,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),h.add(e)}}(),I=function(){var e=new j.R;return function(t,o){var a=n.domElement===document?n.domElement.body:n.domElement;if(n.object.isPerspectiveCamera){var i=n.object.position;e.copy(i).sub(n.target);var s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),S(2*t*s/a.clientHeight,n.object.matrix),A(2*o*s/a.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(S(t*(n.object.right-n.object.left)/n.object.zoom/a.clientWidth,n.object.matrix),A(o*(n.object.top-n.object.bottom)/n.object.zoom/a.clientHeight,n.object.matrix)):(console.warn("WARNING: MapControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function Y(e){n.object.isPerspectiveCamera?d/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Z(e){n.object.isPerspectiveCamera?d*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(e){m.set(e.clientX,e.clientY)}function X(e){if(!1!==n.enableRotate&&0!==(r&s.ROTATE)){if(w.set(e.touches[0].pageX,e.touches[0].pageY),v.set(e.touches[1].pageX,e.touches[1].pageY),y.subVectors(w,m),f.subVectors(v,b),g.subVectors(b,m),E.subVectors(v,w),function(){if(!F(g))return!1;if(!F(E))return!1;if(!H(y))return!1;if(!H(f))return!1;return y.dot(f)>0}()){var t=n.domElement===document?n.domElement.body:n.domElement;k(2*Math.PI*y.y/t.clientHeight),r=s.ROTATE_UP}else 0!==(r&s.ROTATE_LEFT)&&L((g.angle()-E.angle())*n.rotateSpeed);m.copy(w),b.copy(v)}}var F=function(){var e=Math.sin(Math.PI/6);return function(t){return Math.abs(Math.sin(t.angle()))<e}}(),H=function(){var e=Math.cos(Math.PI/2-Math.PI/6);return function(t){return Math.abs(Math.cos(t.angle()))<e}}();function N(e){if(!1!==n.enabled){switch(e.preventDefault(),e.button){case n.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey){if(!1===n.enableRotate)return;D(e),r=s.ROTATE}else{if(!1===n.enablePan)return;!function(e){P.set(e.clientX,e.clientY)}(e),r=s.PAN}break;case n.mouseButtons.MIDDLE:if(!1===n.enableZoom)return;!function(e){x.set(e.clientX,e.clientY)}(e),r=s.DOLLY;break;case n.mouseButtons.RIGHT:if(!1===n.enableRotate)return;D(e),r=s.ROTATE}r!==s.NONE&&(document.addEventListener("mousemove",z,!1),document.addEventListener("mouseup",U,!1),n.dispatchEvent(a))}}function z(e){if(!1!==n.enabled)switch(e.preventDefault(),r){case s.ROTATE:if(!1===n.enableRotate)return;!function(e){w.set(e.clientX,e.clientY),y.subVectors(w,m).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;L(2*Math.PI*y.x/t.clientHeight),k(2*Math.PI*y.y/t.clientHeight),m.copy(w),n.update()}(e);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(e){O.set(e.clientX,e.clientY),C.subVectors(O,x),C.y>0?Y(T()):C.y<0&&Z(T()),x.copy(O),n.update()}(e);break;case s.PAN:if(!1===n.enablePan)return;!function(e){M.set(e.clientX,e.clientY),R.subVectors(M,P).multiplyScalar(n.panSpeed),I(R.x,R.y),P.copy(M),n.update()}(e)}}function U(e){!1!==n.enabled&&(document.removeEventListener("mousemove",z,!1),document.removeEventListener("mouseup",U,!1),n.dispatchEvent(i),r=s.NONE)}function Q(e){!1===n.enabled||!1===n.enableZoom||r!==s.NONE&&r!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(a),function(e){e.deltaY<0?Z(T()):e.deltaY>0&&Y(T()),n.update()}(e),n.dispatchEvent(i))}function B(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(e){switch(e.keyCode){case n.keys.UP:I(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:I(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:I(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:I(-n.keyPanSpeed,0),n.update()}}(e)}function _(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===n.enablePan)return;!function(e){n.enablePan&&P.set(e.touches[0].pageX,e.touches[0].pageY)}(e),r=s.PAN;break;case 2:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){m.set(e.touches[0].pageX,e.touches[0].pageY),b.set(e.touches[1].pageX,e.touches[1].pageY)}(e),function(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+o*o);x.set(0,a)}}(e),r=s.DOLLY_ROTATE;break;default:r=s.NONE}r!==s.NONE&&n.dispatchEvent(a)}}function W(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===n.enablePan)return;if(r!==s.PAN)return;!function(e){!1!==n.enablePan&&0!==(r&s.PAN)&&(M.set(e.touches[0].pageX,e.touches[0].pageY),R.subVectors(M,P).multiplyScalar(n.panSpeed),I(R.x,R.y),P.copy(M))}(e),n.update();break;case 2:if(!1===n.enableZoom&&!1===n.enableRotate)return;if(0===(r&s.DOLLY_ROTATE))return;X(e),function(e){if(!1!==n.enableZoom&&0!==(r&s.DOLLY)){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+o*o);O.set(0,a),C.set(0,Math.pow(O.y/x.y,n.zoomSpeed)),Y(C.y),x.copy(O)}}(e),n.update();break;default:r=s.NONE}}function G(e){!1!==n.enabled&&(n.dispatchEvent(i),r=s.NONE)}function q(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",q,!1),n.domElement.addEventListener("mousedown",N,!1),n.domElement.addEventListener("wheel",Q,!1),n.domElement.addEventListener("touchstart",_,!1),n.domElement.addEventListener("touchend",G,!1),n.domElement.addEventListener("touchmove",W,!1),window.addEventListener("keydown",B,!1),this.update()};(O.prototype=Object.create(j.n.prototype)).constructor=O,Object.defineProperties(O.prototype,{center:{get:function(){return console.warn("THREE.MapControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.MapControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.MapControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.MapControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.MapControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.MapControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.MapControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.MapControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.MapControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.MapControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.MapControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});var C=O,T=function(e,t){j.B.call(this),t=void 0!==t?t:document,this.visible=!1;var n=new L;this.add(n);var o=new k;this.add(o);var a=this;F("camera",e),F("object",void 0),F("enabled",!0),F("axis",null),F("mode","translate"),F("translationSnap",null),F("rotationSnap",null),F("space","world"),F("size",1),F("dragging",!1),F("showX",!0),F("showY",!0),F("showZ",!0);var i={type:"change"},s={type:"mouseDown"},r={type:"mouseUp",mode:a.mode},c={type:"objectChange"},l=new j.I,p=new j.R,d=new j.R,h=new j.H,u={X:new j.R(1,0,0),Y:new j.R(0,1,0),Z:new j.R(0,0,1)},m=new j.H,b=new j.R,w=new j.R,v=new j.R,y=new j.R,f=0,g=new j.R,E=new j.H,P=new j.R,M=new j.R,R=new j.H,x=new j.R,O=new j.R,C=new j.H,T=new j.R,S=new j.R,A=new j.H,I=new j.R,Y=new j.R,Z=new j.R,D=new j.H,X=new j.R;function F(e,t){var s=t;Object.defineProperty(a,e,{get:function(){return void 0!==s?s:t},set:function(t){s!==t&&(s=t,o[e]=t,n[e]=t,a.dispatchEvent({type:e+"-changed",value:t}),a.dispatchEvent(i))}}),a[e]=t,o[e]=t,n[e]=t}function H(e){var n=e.changedTouches?e.changedTouches[0]:e,o=t.getBoundingClientRect();return{x:(n.clientX-o.left)/o.width*2-1,y:-(n.clientY-o.top)/o.height*2+1,button:e.button}}function N(e){e.preventDefault()}function z(e){a.enabled&&a.pointerHover(H(e))}function U(e){a.enabled&&(e.preventDefault(),a.pointerHover(H(e)),a.pointerDown(H(e)))}function Q(e){a.enabled&&(e.preventDefault(),a.pointerMove(H(e)))}function B(e){a.enabled&&(e.preventDefault(),a.pointerUp(H(e)))}F("parentQuaternion",R),F("worldPosition",S),F("worldPositionStart",O),F("worldQuaternion",A),F("worldQuaternionStart",C),F("cameraPosition",g),F("cameraQuaternion",E),F("pointStart",w),F("pointEnd",v),F("rotationAxis",y),F("rotationAngle",f),F("eye",Y),t.addEventListener("mousedown",U,!1),t.addEventListener("touchstart",U,!1),t.addEventListener("mousemove",z,!1),t.addEventListener("touchmove",z,!1),document.addEventListener("mousemove",Q,!1),t.addEventListener("touchmove",Q,!1),document.addEventListener("mouseup",B,!1),t.addEventListener("touchend",B,!1),t.addEventListener("touchcancel",B,!1),t.addEventListener("touchleave",B,!1),t.addEventListener("contextmenu",N,!1),this.dispose=function(){t.removeEventListener("mousedown",U),t.removeEventListener("touchstart",U),t.removeEventListener("mousemove",z),t.removeEventListener("touchmove",z),document.removeEventListener("mousemove",Q),t.removeEventListener("touchmove",Q),document.removeEventListener("mouseup",B),t.removeEventListener("touchend",B),t.removeEventListener("touchcancel",B),t.removeEventListener("touchleave",B),t.removeEventListener("contextmenu",N)},this.attach=function(e){this.object=e,this.visible=!0},this.detach=function(){this.object=void 0,this.visible=!1,this.axis=null},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),this.object.parent.matrixWorld.decompose(M,R,x),this.object.matrixWorld.decompose(S,A,I)),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(g,E,P),this.camera instanceof j.E?Y.copy(g).sub(S).normalize():this.camera instanceof j.D&&Y.copy(g).normalize(),j.B.prototype.updateMatrixWorld.call(this)},this.pointerHover=function(e){if(void 0!==this.object&&!0!==this.dragging&&(void 0===e.button||0===e.button)){l.setFromCamera(e,this.camera);var t=l.intersectObjects(n.picker[this.mode].children,!0)[0]||!1;this.axis=t?t.object.name:null}},this.pointerDown=function(e){if(void 0!==this.object&&!0!==this.dragging&&(void 0===e.button||0===e.button)&&(0===e.button||void 0===e.button)&&null!==this.axis){l.setFromCamera(e,this.camera);var t=l.intersectObjects([o],!0)[0]||!1;if(t){var n=this.space;if("scale"===this.mode?n="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(n="world"),"local"===n&&"rotate"===this.mode){var a=this.rotationSnap;"X"===this.axis&&a&&(this.object.rotation.x=Math.round(this.object.rotation.x/a)*a),"Y"===this.axis&&a&&(this.object.rotation.y=Math.round(this.object.rotation.y/a)*a),"Z"===this.axis&&a&&(this.object.rotation.z=Math.round(this.object.rotation.z/a)*a)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),Z.copy(this.object.position),D.copy(this.object.quaternion),X.copy(this.object.scale),this.object.matrixWorld.decompose(O,C,T),w.copy(t.point).sub(O),"local"===n&&w.applyQuaternion(C.clone().inverse())}this.dragging=!0,s.mode=this.mode,this.dispatchEvent(s)}},this.pointerMove=function(e){var t=this.axis,n=this.mode,a=this.object,s=this.space;if("scale"===n?s="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(s="world"),void 0!==a&&null!==t&&!1!==this.dragging&&(void 0===e.button||0===e.button)){l.setFromCamera(e,this.camera);var r=l.intersectObjects([o],!0)[0]||!1;if(!1!==r){if(v.copy(r.point).sub(O),"local"===s&&v.applyQuaternion(C.clone().inverse()),"translate"===n)-1===t.search("X")&&(v.x=w.x),-1===t.search("Y")&&(v.y=w.y),-1===t.search("Z")&&(v.z=w.z),"local"===s?a.position.copy(v).sub(w).applyQuaternion(D):a.position.copy(v).sub(w),a.position.add(Z),this.translationSnap&&("local"===s&&(a.position.applyQuaternion(h.copy(D).inverse()),-1!==t.search("X")&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.position.applyQuaternion(D)),"world"===s&&(a.parent&&a.position.add(p.setFromMatrixPosition(a.parent.matrixWorld)),-1!==t.search("X")&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.parent&&a.position.sub(p.setFromMatrixPosition(a.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){var g=v.length()/w.length();v.dot(w)<0&&(g*=-1),p.set(g,g,g)}else p.copy(v).divide(w),-1===t.search("X")&&(p.x=1),-1===t.search("Y")&&(p.y=1),-1===t.search("Z")&&(p.z=1);a.scale.copy(X).multiply(p)}else if("rotate"===n){var E=20/S.distanceTo(p.setFromMatrixPosition(this.camera.matrixWorld)),P="local"===this.space?A:m,M=u[t];"E"===t?(p.copy(v).cross(w),y.copy(Y),f=v.angleTo(w)*(p.dot(Y)<0?1:-1)):"XYZE"===t?(p.copy(v).sub(w).cross(Y).normalize(),y.copy(p),f=v.sub(w).dot(p.cross(Y))*E):"X"!==t&&"Y"!==t&&"Z"!==t||(b.copy(M).applyQuaternion(P),y.copy(M),p=M.clone(),d=v.clone().sub(w),"local"===s&&(p.applyQuaternion(P),d.applyQuaternion(C)),f=d.dot(p.cross(Y).normalize())*E),this.rotationSnap&&(f=Math.round(f/this.rotationSnap)*this.rotationSnap),this.rotationAngle=f,"local"===s?(a.quaternion.copy(D),a.quaternion.multiply(h.setFromAxisAngle(y,f))):(a.quaternion.copy(h.setFromAxisAngle(y,f)),a.quaternion.multiply(D))}this.dispatchEvent(i),this.dispatchEvent(c)}}},this.pointerUp=function(e){void 0!==e.button&&0!==e.button||(this.dragging&&null!==this.axis&&(r.mode=this.mode,this.dispatchEvent(r)),this.dragging=!1,void 0===e.button&&(this.axis=null))},this.getMode=function(){return a.mode},this.setMode=function(e){a.mode=e},this.setTranslationSnap=function(e){a.translationSnap=e},this.setRotationSnap=function(e){a.rotationSnap=e},this.setSize=function(e){a.size=e},this.setSpace=function(e){a.space=e},this.update=function(){console.warn("TransformControls: update function has been depricated.")}};T.prototype=Object.assign(Object.create(j.B.prototype),{constructor:T,isTransformControls:!0});var L=function(){j.B.call(this),this.type="TransformControlsGizmo";var e=new j.z({depthTest:!1,depthWrite:!1,transparent:!0,side:j.l,fog:!1}),t=new j.u({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1}),n=e.clone();n.opacity=.15;var o=e.clone();o.opacity=.33;var a=e.clone();a.color.set(16711680);var i=e.clone();i.color.set(65280);var s=e.clone();s.color.set(255);var r=e.clone();r.opacity=.25;var c=r.clone();c.color.set(16776960);var l=r.clone();l.color.set(65535);var p=r.clone();p.color.set(16711935),e.clone().color.set(16776960);var d=t.clone();d.color.set(16711680);var h=t.clone();h.color.set(65280);var u=t.clone();u.color.set(255);var m=t.clone();m.color.set(65535);var b=t.clone();b.color.set(16711935);var w=t.clone();w.color.set(16776960);var v=t.clone();v.color.set(7895160);var y=w.clone();y.opacity=.25;var f=new j.j(0,.05,.2,12,1,!1),g=new j.c(.125,.125,.125),E=new j.e;E.addAttribute("position",new j.p([0,0,0,1,0,0],3));var P=function(e,t){for(var n=new j.e,o=[],a=0;a<=64*t;++a)o.push(0,Math.cos(a/32*Math.PI)*e,Math.sin(a/32*Math.PI)*e);return n.addAttribute("position",new j.p(o,3)),n},M={X:[[new j.y(f,a),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new j.y(f,a),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new j.t(E,d)]],Y:[[new j.y(f,i),[0,1,0],null,null,"fwd"],[new j.y(f,i),[0,1,0],[Math.PI,0,0],null,"bwd"],[new j.t(E,h),null,[0,0,Math.PI/2]]],Z:[[new j.y(f,s),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new j.y(f,s),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new j.t(E,u),null,[0,-Math.PI/2,0]]],XYZ:[[new j.y(new j.C(.1,0),r),[0,0,0],[0,0,0]]],XY:[[new j.y(new j.h(.1,32),c),[0,0,0]]],YZ:[[new j.y(new j.G(.295,.295),l),[0,.15,.15],[0,Math.PI/2,0]],[new j.t(E,m),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new j.t(E,m),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new j.y(new j.G(.295,.295),p),[.15,0,.15],[-Math.PI/2,0,0]],[new j.t(E,b),[.18,0,.3],null,[.125,1,1]],[new j.t(E,b),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},R={X:[[new j.y(new j.j(.2,0,1,4,1,!1),n),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new j.y(new j.j(.2,0,1,4,1,!1),n),[0,.6,0]]],Z:[[new j.y(new j.j(.2,0,1,4,1,!1),n),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new j.y(new j.C(.2,0),n)]],XY:[[new j.y(new j.h(.1,32),n),[0,0,0]]],YZ:[[new j.y(new j.G(.4,.4),n),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new j.y(new j.G(.4,.4),n),[.2,0,.2],[-Math.PI/2,0,0]]]},x={START:[[new j.y(new j.C(.01,2),o),null,null,null,"helper"]],END:[[new j.y(new j.C(.01,2),o),null,null,null,"helper"]],DELTA:[[new j.t(function(e,t){var n=new j.e;return n.addAttribute("position",new j.p([0,0,0,1,1,1],3)),n}(),o),null,null,null,"helper"]],X:[[new j.t(E,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new j.t(E,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new j.t(E,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},O={X:[[new j.t(P(1,.5),d)],[new j.y(new j.C(.04,0),a),[0,0,.99],null,[1,3,1]]],Y:[[new j.t(P(1,.5),h),null,[0,0,-Math.PI/2]],[new j.y(new j.C(.04,0),i),[0,0,.99],null,[3,1,1]]],Z:[[new j.t(P(1,.5),u),null,[0,Math.PI/2,0]],[new j.y(new j.C(.04,0),s),[.99,0,0],null,[1,3,1]]],E:[[new j.t(P(1.25,1),y),null,[0,Math.PI/2,0]],[new j.y(new j.j(.03,0,.15,4,1,!1),y),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new j.y(new j.j(.03,0,.15,4,1,!1),y),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new j.y(new j.j(.03,0,.15,4,1,!1),y),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new j.y(new j.j(.03,0,.15,4,1,!1),y),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new j.t(P(1,1),v),null,[0,Math.PI/2,0]]]},C={AXIS:[[new j.t(E,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},T={X:[[new j.y(new j.P(1,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new j.y(new j.P(1,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new j.y(new j.P(1,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new j.y(new j.P(1.25,.1,2,24),n)]],XYZE:[[new j.y(new j.M(.7,10,8),n)]]},L={X:[[new j.y(g,a),[.8,0,0],[0,0,-Math.PI/2]],[new j.t(E,d),null,null,[.8,1,1]]],Y:[[new j.y(g,i),[0,.8,0]],[new j.t(E,h),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new j.y(g,s),[0,0,.8],[Math.PI/2,0,0]],[new j.t(E,u),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new j.y(g,c),[.85,.85,0],null,[2,2,.2]],[new j.t(E,w),[.855,.98,0],null,[.125,1,1]],[new j.t(E,w),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new j.y(g,l),[0,.85,.85],null,[.2,2,2]],[new j.t(E,m),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new j.t(E,m),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new j.y(g,p),[.85,0,.85],null,[2,.2,2]],[new j.t(E,b),[.855,0,.98],null,[.125,1,1]],[new j.t(E,b),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new j.y(new j.c(.125,.125,.125),r),[1.1,0,0]]],XYZY:[[new j.y(new j.c(.125,.125,.125),r),[0,1.1,0]]],XYZZ:[[new j.y(new j.c(.125,.125,.125),r),[0,0,1.1]]]},k={X:[[new j.y(new j.j(.2,0,.8,4,1,!1),n),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new j.y(new j.j(.2,0,.8,4,1,!1),n),[0,.5,0]]],Z:[[new j.y(new j.j(.2,0,.8,4,1,!1),n),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new j.y(g,n),[.85,.85,0],null,[3,3,.2]]],YZ:[[new j.y(g,n),[0,.85,.85],null,[.2,3,3]]],XZ:[[new j.y(g,n),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new j.y(new j.c(.2,.2,.2),n),[1.1,0,0]]],XYZY:[[new j.y(new j.c(.2,.2,.2),n),[0,1.1,0]]],XYZZ:[[new j.y(new j.c(.2,.2,.2),n),[0,0,1.1]]]},S={X:[[new j.t(E,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new j.t(E,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new j.t(E,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},A=function(e){var t=new j.B;for(var n in e)for(var o=e[n].length;o--;){var a=e[n][o][0].clone(),i=e[n][o][1],s=e[n][o][2],r=e[n][o][3],c=e[n][o][4];a.name=n,a.tag=c,i&&a.position.set(i[0],i[1],i[2]),s&&a.rotation.set(s[0],s[1],s[2]),r&&a.scale.set(r[0],r[1],r[2]),a.updateMatrix();var l=a.geometry.clone();l.applyMatrix(a.matrix),a.geometry=l,a.position.set(0,0,0),a.rotation.set(0,0,0),a.scale.set(1,1,1),t.add(a)}return t},I=new j.R(0,0,0),Y=new j.m,Z=new j.R(0,1,0),D=new j.R(0,0,0),X=new j.x,F=new j.H,H=new j.H,N=new j.H,z=new j.R(1,0,0),U=new j.R(0,1,0),Q=new j.R(0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=A(M)),this.add(this.gizmo.rotate=A(O)),this.add(this.gizmo.scale=A(L)),this.add(this.picker.translate=A(R)),this.add(this.picker.rotate=A(T)),this.add(this.picker.scale=A(k)),this.add(this.helper.translate=A(x)),this.add(this.helper.rotate=A(C)),this.add(this.helper.scale=A(S)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1,this.updateMatrixWorld=function(){var e=this.space;"scale"===this.mode&&(e="local");var t="local"===e?this.worldQuaternion:N;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var n=[];n=(n=(n=n.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var o=0;o<n.length;o++){var a=n[o];a.visible=!0,a.rotation.set(0,0,0),a.position.copy(this.worldPosition);var i=this.worldPosition.distanceTo(this.cameraPosition);if(a.scale.set(1,1,1).multiplyScalar(i*this.size/7),"helper"!==a.tag){if(a.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){"X"!==a.name&&"XYZX"!==a.name||Math.abs(Z.copy(z).applyQuaternion(t).dot(this.eye))>.99&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"Y"!==a.name&&"XYZY"!==a.name||Math.abs(Z.copy(U).applyQuaternion(t).dot(this.eye))>.99&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"Z"!==a.name&&"XYZZ"!==a.name||Math.abs(Z.copy(Q).applyQuaternion(t).dot(this.eye))>.99&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"XY"===a.name&&Math.abs(Z.copy(Q).applyQuaternion(t).dot(this.eye))<.2&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"YZ"===a.name&&Math.abs(Z.copy(z).applyQuaternion(t).dot(this.eye))<.2&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"XZ"===a.name&&Math.abs(Z.copy(U).applyQuaternion(t).dot(this.eye))<.2&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),-1!==a.name.search("X")&&(Z.copy(z).applyQuaternion(t).dot(this.eye)<-.4?"fwd"===a.tag?a.visible=!1:a.scale.x*=-1:"bwd"===a.tag&&(a.visible=!1)),-1!==a.name.search("Y")&&(Z.copy(U).applyQuaternion(t).dot(this.eye)<-.4?"fwd"===a.tag?a.visible=!1:a.scale.y*=-1:"bwd"===a.tag&&(a.visible=!1)),-1!==a.name.search("Z")&&(Z.copy(Q).applyQuaternion(t).dot(this.eye)<-.4?"fwd"===a.tag?a.visible=!1:a.scale.z*=-1:"bwd"===a.tag&&(a.visible=!1))}else"rotate"===this.mode&&(H.copy(t),Z.copy(this.eye).applyQuaternion(F.copy(t).inverse()),-1!==a.name.search("E")&&a.quaternion.setFromRotationMatrix(X.lookAt(this.eye,D,U)),"X"===a.name&&(F.setFromAxisAngle(z,Math.atan2(-Z.y,Z.z)),F.multiplyQuaternions(H,F),a.quaternion.copy(F)),"Y"===a.name&&(F.setFromAxisAngle(U,Math.atan2(Z.x,Z.z)),F.multiplyQuaternions(H,F),a.quaternion.copy(F)),"Z"===a.name&&(F.setFromAxisAngle(Q,Math.atan2(Z.y,Z.x)),F.multiplyQuaternions(H,F),a.quaternion.copy(F)));a.visible=a.visible&&(-1===a.name.indexOf("X")||this.showX),a.visible=a.visible&&(-1===a.name.indexOf("Y")||this.showY),a.visible=a.visible&&(-1===a.name.indexOf("Z")||this.showZ),a.visible=a.visible&&(-1===a.name.indexOf("E")||this.showX&&this.showY&&this.showZ),a.material._opacity=a.material._opacity||a.material.opacity,a.material._color=a.material._color||a.material.color.clone(),a.material.color.copy(a.material._color),a.material.opacity=a.material._opacity,this.enabled?this.axis&&(a.name===this.axis?(a.material.opacity=1,a.material.color.lerp(new j.i(1,1,1),.5)):this.axis.split("").some(function(e){return a.name===e})?(a.material.opacity=1,a.material.color.lerp(new j.i(1,1,1),.5)):(a.material.opacity*=.25,a.material.color.lerp(new j.i(1,1,1),.5))):(a.material.opacity*=.5,a.material.color.lerp(new j.i(1,1,1),.5))}else a.visible=!1,"AXIS"===a.name?(a.position.copy(this.worldPositionStart),a.visible=!!this.axis,"X"===this.axis&&(F.setFromEuler(Y.set(0,0,0)),a.quaternion.copy(t).multiply(F),Math.abs(Z.copy(z).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"Y"===this.axis&&(F.setFromEuler(Y.set(0,0,Math.PI/2)),a.quaternion.copy(t).multiply(F),Math.abs(Z.copy(U).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"Z"===this.axis&&(F.setFromEuler(Y.set(0,Math.PI/2,0)),a.quaternion.copy(t).multiply(F),Math.abs(Z.copy(Q).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"XYZE"===this.axis&&(F.setFromEuler(Y.set(0,Math.PI/2,0)),Z.copy(this.rotationAxis),a.quaternion.setFromRotationMatrix(X.lookAt(D,Z,U)),a.quaternion.multiply(F),a.visible=this.dragging),"E"===this.axis&&(a.visible=!1)):"START"===a.name?(a.position.copy(this.worldPositionStart),a.visible=this.dragging):"END"===a.name?(a.position.copy(this.worldPosition),a.visible=this.dragging):"DELTA"===a.name?(a.position.copy(this.worldPositionStart),a.quaternion.copy(this.worldQuaternionStart),I.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),I.applyQuaternion(this.worldQuaternionStart.clone().inverse()),a.scale.copy(I),a.visible=this.dragging):(a.quaternion.copy(t),this.dragging?a.position.copy(this.worldPositionStart):a.position.copy(this.worldPosition),this.axis&&(a.visible=-1!==this.axis.search(a.name)))}j.B.prototype.updateMatrixWorld.call(this)}};L.prototype=Object.assign(Object.create(j.B.prototype),{constructor:L,isTransformControlsGizmo:!0});var k=function(){j.y.call(this,new j.G(1e5,1e5,2,2),new j.z({visible:!1,wireframe:!0,side:j.l,transparent:!0,opacity:.1})),this.type="TransformControlsPlane";var e=new j.R(1,0,0),t=new j.R(0,1,0),n=new j.R(0,0,1),o=new j.R,a=new j.R,i=new j.R,s=new j.x,r=new j.H;this.updateMatrixWorld=function(){var c=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(c="local"),e.set(1,0,0).applyQuaternion("local"===c?this.worldQuaternion:r),t.set(0,1,0).applyQuaternion("local"===c?this.worldQuaternion:r),n.set(0,0,1).applyQuaternion("local"===c?this.worldQuaternion:r),i.copy(t),this.mode){case"translate":case"scale":switch(this.axis){case"X":i.copy(this.eye).cross(e),a.copy(e).cross(i);break;case"Y":i.copy(this.eye).cross(t),a.copy(t).cross(i);break;case"Z":i.copy(this.eye).cross(n),a.copy(n).cross(i);break;case"XY":a.copy(n);break;case"YZ":a.copy(e);break;case"XZ":i.copy(n),a.copy(t);break;case"XYZ":case"E":a.set(0,0,0)}break;case"rotate":default:a.set(0,0,0)}0===a.length()?this.quaternion.copy(this.cameraQuaternion):(s.lookAt(o.set(0,0,0),a,i),this.quaternion.setFromRotationMatrix(s)),j.B.prototype.updateMatrixWorld.call(this)}};k.prototype=Object.assign(Object.create(j.y.prototype),{constructor:k,isTransformControlsPlane:!0});var S=T,A=function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new j.R,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:j.v.LEFT,MIDDLE:j.v.MIDDLE,RIGHT:j.v.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(o),n.update(),r=s.NONE},this.update=function(){var t=new j.R,a=(new j.H).setFromUnitVectors(e.up,new j.R(0,1,0)),i=a.clone().inverse(),m=new j.R,b=new j.H;return function(){var e=n.object.position;return t.copy(e).sub(n.target),t.applyQuaternion(a),l.setFromVector3(t),n.autoRotate&&r===s.NONE&&R(2*Math.PI/60/60*n.autoRotateSpeed),l.theta+=p.theta,l.phi+=p.phi,l.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=d,l.radius=Math.max(n.minDistance,Math.min(n.maxDistance,l.radius)),n.target.add(h),t.setFromSpherical(l),t.applyQuaternion(i),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(p.theta*=1-n.dampingFactor,p.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(p.set(0,0,0),h.set(0,0,0)),d=1,!!(u||m.distanceToSquared(n.object.position)>c||8*(1-b.dot(n.object.quaternion))>c)&&(n.dispatchEvent(o),m.copy(n.object.position),b.copy(n.object.quaternion),u=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",N,!1),n.domElement.removeEventListener("mousedown",A,!1),n.domElement.removeEventListener("wheel",Z,!1),n.domElement.removeEventListener("touchstart",X,!1),n.domElement.removeEventListener("touchend",H,!1),n.domElement.removeEventListener("touchmove",F,!1),document.removeEventListener("mousemove",I,!1),document.removeEventListener("mouseup",Y,!1),window.removeEventListener("keydown",D,!1)};var n=this,o={type:"change"},a={type:"start"},i={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},r=s.NONE,c=1e-6,l=new j.N,p=new j.N,d=1,h=new j.R,u=!1,m=new j.Q,b=new j.Q,w=new j.Q,v=new j.Q,y=new j.Q,f=new j.Q,g=new j.Q,E=new j.Q,P=new j.Q;function M(){return Math.pow(.95,n.zoomSpeed)}function R(e){p.theta-=e}function x(e){p.phi-=e}var O=function(){var e=new j.R;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}}(),C=function(){var e=new j.R;return function(t,o){!0===n.screenSpacePanning?e.setFromMatrixColumn(o,1):(e.setFromMatrixColumn(o,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),h.add(e)}}(),T=function(){var e=new j.R;return function(t,o){var a=n.domElement===document?n.domElement.body:n.domElement;if(n.object.isPerspectiveCamera){var i=n.object.position;e.copy(i).sub(n.target);var s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),O(2*t*s/a.clientHeight,n.object.matrix),C(2*o*s/a.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(O(t*(n.object.right-n.object.left)/n.object.zoom/a.clientWidth,n.object.matrix),C(o*(n.object.top-n.object.bottom)/n.object.zoom/a.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function L(e){n.object.isPerspectiveCamera?d/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function k(e){n.object.isPerspectiveCamera?d*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function S(e){v.set(e.clientX,e.clientY)}function A(e){if(!1!==n.enabled){switch(e.preventDefault(),e.button){case n.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey){if(!1===n.enablePan)return;S(e),r=s.PAN}else{if(!1===n.enableRotate)return;!function(e){m.set(e.clientX,e.clientY)}(e),r=s.ROTATE}break;case n.mouseButtons.MIDDLE:if(!1===n.enableZoom)return;!function(e){g.set(e.clientX,e.clientY)}(e),r=s.DOLLY;break;case n.mouseButtons.RIGHT:if(!1===n.enablePan)return;S(e),r=s.PAN}r!==s.NONE&&(document.addEventListener("mousemove",I,!1),document.addEventListener("mouseup",Y,!1),n.dispatchEvent(a))}}function I(e){if(!1!==n.enabled)switch(e.preventDefault(),r){case s.ROTATE:if(!1===n.enableRotate)return;!function(e){b.set(e.clientX,e.clientY),w.subVectors(b,m).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;R(2*Math.PI*w.x/t.clientHeight),x(2*Math.PI*w.y/t.clientHeight),m.copy(b),n.update()}(e);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(e){E.set(e.clientX,e.clientY),P.subVectors(E,g),P.y>0?L(M()):P.y<0&&k(M()),g.copy(E),n.update()}(e);break;case s.PAN:if(!1===n.enablePan)return;!function(e){y.set(e.clientX,e.clientY),f.subVectors(y,v).multiplyScalar(n.panSpeed),T(f.x,f.y),v.copy(y),n.update()}(e)}}function Y(e){!1!==n.enabled&&(document.removeEventListener("mousemove",I,!1),document.removeEventListener("mouseup",Y,!1),n.dispatchEvent(i),r=s.NONE)}function Z(e){!1===n.enabled||!1===n.enableZoom||r!==s.NONE&&r!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(a),function(e){e.deltaY<0?k(M()):e.deltaY>0&&L(M()),n.update()}(e),n.dispatchEvent(i))}function D(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(e){switch(e.keyCode){case n.keys.UP:T(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:T(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:T(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:T(-n.keyPanSpeed,0),n.update()}}(e)}function X(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===n.enableRotate)return;!function(e){m.set(e.touches[0].pageX,e.touches[0].pageY)}(e),r=s.TOUCH_ROTATE;break;case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+o*o);g.set(0,a)}if(n.enablePan){var i=.5*(e.touches[0].pageX+e.touches[1].pageX),s=.5*(e.touches[0].pageY+e.touches[1].pageY);v.set(i,s)}}(e),r=s.TOUCH_DOLLY_PAN;break;default:r=s.NONE}r!==s.NONE&&n.dispatchEvent(a)}}function F(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===n.enableRotate)return;if(r!==s.TOUCH_ROTATE)return;!function(e){b.set(e.touches[0].pageX,e.touches[0].pageY),w.subVectors(b,m).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;R(2*Math.PI*w.x/t.clientHeight),x(2*Math.PI*w.y/t.clientHeight),m.copy(b),n.update()}(e);break;case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;if(r!==s.TOUCH_DOLLY_PAN)return;!function(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+o*o);E.set(0,a),P.set(0,Math.pow(E.y/g.y,n.zoomSpeed)),L(P.y),g.copy(E)}if(n.enablePan){var i=.5*(e.touches[0].pageX+e.touches[1].pageX),s=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(i,s),f.subVectors(y,v).multiplyScalar(n.panSpeed),T(f.x,f.y),v.copy(y)}n.update()}(e);break;default:r=s.NONE}}function H(e){!1!==n.enabled&&(n.dispatchEvent(i),r=s.NONE)}function N(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",N,!1),n.domElement.addEventListener("mousedown",A,!1),n.domElement.addEventListener("wheel",Z,!1),n.domElement.addEventListener("touchstart",X,!1),n.domElement.addEventListener("touchend",H,!1),n.domElement.addEventListener("touchmove",F,!1),window.addEventListener("keydown",D,!1),this.update()};(A.prototype=Object.create(j.n.prototype)).constructor=A,Object.defineProperties(A.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});var I=A,Y=function(){function e(e,t,n){var o=[];if(t&&t.length>0)for(var a in t)!function(e){var a=new Promise(function(o,a){n&&t&&n.itemStart(e);var i=document.createElement("script");i.src=e,i.addEventListener("load",function(){n&&n.itemEnd(e),console.log("Loaded: "+e),o(e)},!1),i.addEventListener("error",function(){console.log("Error: "+e),n&&n.itemEnd(e),a(e)},!1),document.body.appendChild(i)});o.push(a)}(e+t[a]);return o}this.load=function(t,n,o){var a=null;if(t=t||"",n&&n.length>0)for(var i in n)!function(t,n){a=a?a.then(function(){return console.log("loaded"),Promise.all(e(t,n,o))}):Promise.all(e(t,n,o))}(t,n[i]);return console.log(a),a}},Z=n(20),D=n.n(Z),X={RendererStats:function(){var e=document.createElement("div");e.style.cssText="width:80px;opacity:0.9;cursor:pointer";var t=document.createElement("div");t.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#200;",e.appendChild(t);var n=document.createElement("div");n.style.cssText="color:#f00;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",n.innerHTML="WebGLRenderer",t.appendChild(n);for(var o=[],a=0;a<11;a++)o[a]=document.createElement("div"),o[a].style.cssText="color:#f00;background-color:#311;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",t.appendChild(o[a]),o[a].innerHTML="-";var i=Date.now();return{domElement:e,update:function(e){if(console.assert(e instanceof j.S),!(Date.now()-i<1e3/30)){i=Date.now();var t=0;o[t++].textContent="== Programs ===",o[t++].textContent="Programs: "+e.info.programs.length,o[t++].textContent="== Memory =====",o[t++].textContent="Geometries: "+e.info.memory.geometries,o[t++].textContent="Textures: "+e.info.memory.textures,o[t++].textContent="== Render =====",o[t++].textContent="Calls: "+e.info.render.calls,o[t++].textContent="Faces: "+e.info.render.triangles,o[t++].textContent="Points: "+e.info.render.points,o[t++].textContent="Lines: "+e.info.render.lines,o[t++].textContent="Frame: "+e.info.render.frame}}}}},F=X,H={isElement:function(e){try{return e instanceof HTMLElement}catch(t){return"object"===typeof e&&1===e.nodeType&&"object"===typeof e.style&&"object"===typeof e.ownerDocument}},disposeObjMemory:function(e){if(null!==e){for(var t=0;t<e.children.length;t++)this.disposeObjMemory(e.children[t]);e.geometry&&(e.geometry.dispose(),e.geometry=void 0),e.material&&(e.material.map&&(e.material.map.dispose(),e.material.map=void 0),e.material.dispose(),e.material=void 0)}e=void 0},parametricGeometries:{plane:function(e,t){return function(n,o,a){var i=n*e,s=o*t;a.set(i,0,s)}}}},N=function(e,t,n,o){var a=this,i=e.container,s={ARC_SEGMENTS:200,selectedObject:null,hiding:!1,splineHelperObjects:[],objects:[],splines:{},positions:[]};i?H.isElement(i)?this.container=i:(this.container=document.getElementById(i),null==this.container&&(i=document.createElement("div"),document.body.appendChild(i),this.container=i)):(i=document.createElement("div"),document.body.appendChild(i),this.container=i),this.setting={nearCamLimit:0,farCamLimit:300,extendedFarCamLimit:200,enableDamping:!1,userControlledAimation:!1,antialias:!0,physicallyCorrectLights:!1,toneMappingExposure:1,toneMappingWhitePoint:1,rendererGammaInput:!0,rendererGammaOutput:!0,enableShadow:!1,floorTextureImage:"images/default_floor.jpg",wallTextureImage:"images/wall-white-paint.jpg"};var r={analysis:!0,pan:!0,exportScene:!0};function c(){j.f.enabled=!0,s.geometry1=new j.h(5,32),function(){var e=new j.K;e.name="Scene",e.background=(new j.i).setHex(5132111),e.fog=new j.q(0,.1,0),a.scene=e,r.exportScene&&(window.scene=e)}(),l(),a.camera=new j.E(45,s.canvas.width/s.canvas.height,10,1e3),a.camera.position.set(0,0,200),function(){var e=new C(a.camera,s.renderer.domElement);e.addEventListener("change",v),e.enableDamping=!0,e.dampingFactor=.25,e.screenSpacePanning=!0,e.maxDistance=500,e.panSpeed=.25,s.controls=e}(),function(){var e=new x.a(s.splineHelperObjects,a.camera,s.renderer.domElement);e.enabled=!1,e.addEventListener("change",v),e.addEventListener("hoveron",function(e){s.transformControl.attach(e.object),b()}),e.addEventListener("hoveroff",function(e){m()})}(),s.transformControl=new S(a.camera,s.renderer.domElement),s.transformControl.showZ=!1,s.transformControl.translationSnap=10,s.transformControl.addEventListener("dragging-changed",function(e){s.controls.enabled=!e.value}),s.transformControl.addEventListener("change",function(e){v()}),s.transformControl.addEventListener("mouseDown",function(e){b()}),s.transformControl.addEventListener("mouseUp",function(e){m()}),s.transformControl.addEventListener("objectChange",function(e){u(s.splines)}),function(){var e=new j.s;e.name="helpers";var t=new j.a(16777215,1);t.name="ambientLight",e.add(t);var n=new j.k(16777215,.5);n.name="dirLight",n.position.set(5,5,5),e.add(n);var o=new j.r(1e3,100,16777215,10066329);o.rotateX(-Math.PI/2),o.name="grid",e.add(o),e.add(s.transformControl),s.helpers=e,(new j.O).load(a.setting.floorTextureImage,function(e){e.wrapS=j.J,e.wrapT=j.J,e.repeat.x=.1,e.repeat.y=.1,s.floorTexture=e}),(new j.O).load(a.setting.wallTextureImage,function(e){e.wrapS=j.J,e.wrapT=j.J,e.repeat.x=.1,e.repeat.y=.1,s.wallTexture=e}),a.scene.add(e),a.sceneReady=!0,v()}(),window.addEventListener("resize",y,!1),w()}function l(){var e=new j.S({antialias:a.setting.antialias,alpha:!1});e.setPixelRatio(window.devicePixelRatio);var t=e.domElement;t.style.position="absolute",t.style.top="0px",t.style.zIndex=0,t.height=a.container.clientHeight,t.width=a.container.clientWidth,e.setSize(t.width,t.height),a.container.appendChild(t),s.renderer=e,s.canvas=t,r.analysis&&(a.stats=new D.a,a.stats.dom.style.position="absolute",a.stats.dom.style.top="0px",a.stats.dom.style.left="80px",document.body.appendChild(a.stats.dom),a.rendererStats=new F.RendererStats,a.rendererStats.domElement.style.position="absolute",a.rendererStats.domElement.style.left="0px",a.rendererStats.domElement.style.top="0px",document.body.appendChild(a.rendererStats.domElement))}function p(e,t){for(var n=0;n<t;n++)d(e[n]),s.positions.push(s.splineHelperObjects[n].position);var o=new j.e;o.addAttribute("position",new j.d(new Float32Array(3*s.ARC_SEGMENTS),3));var a=new j.g(s.positions);for(var i in a.curveType="catmullrom",a.tension=0,a.closed=!0,a.mesh=new j.t(o.clone(),new j.u({color:16711680,opacity:.35,linewidth:1})),s.splines.uniform=a,s.splines){var r=s.splines[i];s.floor2d.add(r.mesh)}}function d(e){var t=new j.z({color:16777215*Math.random()}),n=new j.y(s.geometry1,t);return e?n.position.copy(e):(n.position.x=100*Math.random()-50,n.position.y=60*Math.random(),n.position.z=0),n.castShadow=!0,n.receiveShadow=!0,s.floor2d.add(n),s.splineHelperObjects.push(n),n}function h(e,t){for(;e.length>s.positions.length;)a.addPoint();for(;e.length<s.positions.length;)a.removePoint();for(var n=0;n<s.positions.length;n++)s.positions[n].copy(e[n]);u(s.splines),s.splinePointsLength=t}function u(e){var t=new j.R;for(var n in e){for(var o=e[n],a=o.mesh.geometry.attributes.position,i=0;i<s.ARC_SEGMENTS;i++){var r=i/(s.ARC_SEGMENTS-1);o.getPoint(r,t),a.setXYZ(i,t.x,t.y,t.z)}a.needsUpdate=!0}for(var c=s.positions.length,l=0;l<c;l++){var p=s.positions[l],d=s.positions[(l+c-1)%c];console.log("Line : "+l+" = "+p.distanceTo(d))}}function m(){b(),s.hiding=setTimeout(function(){s.transformControl.detach(s.transformControl.object)},1e3)}function b(){s.hiding&&clearTimeout(s.hiding)}function w(){requestAnimationFrame(w),a.sceneReady&&(s.doAnimate||a.setting.userControlledAimation)&&(s.controls.update(),r.analysis&&(a.rendererStats.update(s.renderer),a.stats.update()),s.renderer.render(a.scene,a.camera))}function v(){s.doAnimate||(s.doAnimate=!0),clearTimeout(s.canvas.renderFrameTimeoutObj),s.canvas.renderFrameTimeoutObj=setTimeout(function(){s.doAnimate=!1},1e3)}function y(){s.canvas.height=a.container.clientHeight,s.canvas.width=a.container.clientWidth,s.renderer.setSize(s.canvas.width,s.canvas.height),a.camera.aspect=s.canvas.width/s.canvas.height,a.camera.updateProjectionMatrix(),v()}this.initSceneSetup=function(){(function(){var t=new Y;return new Promise(function(o,a){t.load(e.cdn,n).then(function(){console.log("scripts are loaded"),o()}).catch(function(){console.log("Error")})})})().then(c)},this.createFloor=function(e){var t=new j.s;t.name="floor2d";var n=new j.s;switch(n.name="floor3d",a.scene.add(t),a.scene.add(n),s.floor2d=t,s.floor3d=n,e.shape){case"Box":!function(e){var t=e.length||100,n=e.width||100,o=e.splinePointsLength||4,a=[new j.R(0,n,0),new j.R(t,n,0),new j.R(t,0,0),new j.R(0,0,0)];p(a,o),h(a,o)}(e);break;case"T":!function(e){var t=e.length||100,n=e.width||100,o=e.flangeSection1||35,a=e.flangeSection2||45,i=e.thickness1||30,s=e.thickness2||40,r=e.splinePointsLength||8,c=[new j.R(0,n-i,0),new j.R(0,n,0),new j.R(t,n,0),new j.R(t,n-s,0),new j.R(t-a,n-s,0),new j.R(t-a,0),new j.R(t-a-o,0),new j.R(t-a-o,n-i,0)];p(c,r),h(c,r)}(e);break;case"U":!function(e){var t=e.length||100,n=e.width||100,o=e.innerWall||60,a=e.thickness1||30,i=e.thickness2||40,s=e.splinePointsLength||8,r=[new j.R(0,n,0),new j.R(a,n,0),new j.R(a,n-o,0),new j.R(t-i,i,0),new j.R(t-i,n,0),new j.R(t,n,0),new j.R(t,0,0),new j.R(0,0,0)];p(r,s),h(r,s)}(e);break;case"L":!function(e){var t=e.length||100,n=e.width||100,o=e.thickness1||30,a=e.thickness2||40,i=e.splinePointsLength||6,s=[new j.R(0,n,0),new j.R(o,n,0),new j.R(o,a,0),new j.R(t,a,0),new j.R(t,0,0),new j.R(0,0,0)];p(s,i),h(s,i)}(e);break;case"C":!function(e){var t=e.splinePointsLength||3,n=[new j.R(50,100,0),new j.R(0,100,0),new j.R(0,0,0)];p(n,t),h(n,t)}(e);break;default:console.log("Unidentified shape selected")}v()},this.clearFloor=function(){var e=a.scene.getObjectByName("floor2d");e&&(!function e(t){if(t)if(t.isMesh||t.isLine)t.material&&(t.material.map&&t.material.map.dispose(),t.material.aoMap&&t.material.aoMap.dispose(),t.material.emissiveMap&&t.material.emissiveMap.dispose(),t.material.lightMap&&t.material.lightMap.dispose(),t.material.bumpMap&&t.material.bumpMap.dispose(),t.material.normalMap&&t.material.normalMap.dispose(),t.material.specularMap&&t.material.specularMap.dispose(),t.material.envMap&&t.material.envMap.dispose(),t.material.dispose()),t.geometry&&t.geometry.dispose();else if(t.type.isGroup)for(var n=0;n<t.children.length;n++)e(t.children[n])}(e),e.parent.remove(e),s.splineHelperObjects.splice(0,s.splineHelperObjects.length),s.positions.splice(0,s.positions.length),v())},this.extrude=function(e){for(var t=[],n=0;n<s.positions.length;n++)t.push(new j.Q(s.positions[n].x,s.positions[n].y));var o=new j.L(t),i=new j.o(o,{depth:30,bevelEnabled:!1});i.computeBoundingSphere();var r=new j.A({color:16777215,wireframe:!1,side:j.b,map:s.floorTexture}),c=new j.A({color:16777215,wireframe:!1,side:j.b,map:s.wallTexture}),l=new j.y(i,[r,c]);l.frustumCulled=!1,l.position.copy(i.boundingSphere.center.negate()),s.floor3d.add(l),a.scene.rotateX(-Math.PI/2),s.helpers.getObjectByName("grid").visible=!1,s.controls.enabled=!1,s.controls.dispose(),function(){var e=new I(a.camera,s.renderer.domElement);e.addEventListener("change",v),e.enableDamping=!0,e.dampingFactor=.25,e.minDistance=0,e.maxDistance=500,e.maxPolarAngle=j.w.degToRad(90),e.minPolarAngle=j.w.degToRad(0),s.orbitControls=e}(),v()},this.addPoint=function(){s.splinePointsLength++,s.positions.push(d().position),u(s.splines),v()},this.removePoint=function(){s.splinePointsLength<=3||(s.splinePointsLength--,s.positions.pop(),s.floor2d.remove(s.splineHelperObjects.pop()),u(s.splines),v())}},z=function(e,t,n){N.call(this,e,t,[[],[]],n)};(z.prototype=Object.create(N.prototype)).constructor=z;var U=z,Q=n(21),B=Object(g.b)({editorUI:function(e,t){switch(e={id:1,showPointButtons:!1,showLayoutButtons:!0,showCreateFloorButton:!1,showClearButton:!1},t.type){case"UPDATE_EDITOR_UI":return Object(Q.a)({},e,t.payload);default:return e}}}),_=Object(g.c)(B);r.a.render(a.a.createElement(i.a,{store:_},a.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()});var W=new R,G=new U({container:document.getElementById("editor"),cdn:""},W,function(){console.log("editor loaded")});G.initSceneSetup();var q=t.default=G}},[[22,2,1]]]);
//# sourceMappingURL=main.55b2ecef.chunk.js.map